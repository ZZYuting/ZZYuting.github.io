---
title: 目标检测总结(1)
layout: post
categories: detection
excerpt: 
tags: 面试
---

#### 目标检测中的正负样本：

首先，检测问题中的正负样本并非人工标注的那些框框，而是程序中（网络）生成出来的ROI，也就是**faster rcnn中的anchor boxes以及SSD中在不同分辨率的feature map中的默认框**，**这些框中的一部分被选为正样本，一部分被选为负样本，另外一部分被当作背景或者不参与运算**。不同的框架有不同的策略，大致都是**根据IOU的值**。在fast的框架中，**SS算法生成的框与GT框进行IOU的判断，进而选取正负样本**，总之，正负样本都是针对于候选框而言，而非GT数据。

#### 正负样本不平衡：

1.OHEM(online hard example miniing):

OHEM算法的核心思想是**根据输入样本的损失进行筛选**，筛选出**hard example**，**表示对分类和检测影响较大的样本**，然后将筛选得到的这些样本应用在随机梯度下降中训练。在实际操作中是**将原来的一个ROI Network扩充为两个ROI Network，这两个ROI Network共享参数。其中前面一个ROI Network只有前向操作，主要用于计算损失；后面一个ROI Network包括前向和后向操作，以hard example作为输入，计算损失并回传梯度。**

![image](https://ws1.sinaimg.cn/large/006tNbRwly1fw5i2ae6ocj31kw0gqe1l.jpg)

![image](https://ws3.sinaimg.cn/large/006tNbRwly1fw5i4zdhp7j31kw0uqkjd.jpg)

#### 模型指标

实际上非常简单，**精确率**是针对我们**预测结果**而言的，它表示的是预测为正的样本中有多少是真正的正样本。那么预测为正就有两种可能了，一种就是把正类预测为正类(TP)，另一种就是把负类预测为正类(FP)，也就是
$$
P=\frac {TP} {TP+FP}
$$
而**召回率**是针对我们原来的**样本**而言的，它表示的是样本中的正例有多少被预测正确了。那也有两种可能，一种是把原来的正类预测成正类(TP)，另一种就是把原来的正类预测为负类(FN)。
$$
R=\frac {TP} {TP+FN}
$$
其实就是分母不同，一个分母是预测为正的样本数，另一个是原来样本中所有的正样本数。

假设我们手上有60个正样本，40个负样本，我们要找出所有的正样本，系统查找出50个，其中只有40个是真正的正样本，计算上述各指标。

精确率（precision）=40/50=0.8

召回率（recall）=40/60=2/3

准确率（accuracy）=预测对的/所有=（TP+TN）/(TP+FN+FP+TN)=（40+30）/（100）=0.7